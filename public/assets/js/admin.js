var adminModule=angular.module("adminModule",["sharedModule"]);adminModule.config(["$stateProvider","$mdDateLocaleProvider",function(e,t){t.formatDate=function(e){return moment(e).format("L")},e.state("main",{url:"/",views:{"":{templateUrl:"/app/components/admin/views/main.view.html",controller:"mainViewController"},"left-sidenav@main":{templateUrl:"/app/components/admin/templates/sidenavs/main-left.sidenav.html",controller:"leftSidenavController"},"toolbar@main":{templateUrl:"/app/components/admin/templates/toolbar.template.html"},"content-container@main":{templateUrl:"/app/components/admin/views/content-container.view.html",controller:"mainContentContainerController"},"content@main":{templateUrl:"/app/components/admin/templates/content/main.content.template.html"},"right-sidenav@main":{templateUrl:"/app/components/admin/templates/sidenavs/dashboard-right-sidenav.template.html"}},onExit:["$mdSidenav",function(e){var t=$('[md-component-id="left"]');t.hasClass("md-closed")&&t.hasClass("md-locked-open")||e("left").toggle()}]}).state("main.settings",{url:"settings",views:{"content-container":{templateUrl:"/app/components/admin/views/content-container.view.html",controller:"settingsContentContainerController"},"toolbar@main.settings":{templateUrl:"/app/components/admin/templates/toolbar.template.html"},"content@main.settings":{templateUrl:"/app/components/admin/templates/content/settings.content.template.html"}},onExit:["$mdSidenav",function(e){var t=$('[md-component-id="left"]');t.hasClass("md-closed")&&t.hasClass("md-locked-open")||e("left").toggle()}]}).state("main.asset",{url:"asset/{assetTypeID}",params:{assetTypeID:null},views:{"content-container":{templateUrl:"/app/components/admin/views/content-container.view.html",controller:"assetTypeContentController"},"toolbar@main.asset":{templateUrl:"/app/components/admin/templates/toolbar.template.html"},"content@main.asset":{templateUrl:"/app/components/admin/templates/content/assets.content.template.html"},"right-sidenav@main.asset":{templateUrl:"/app/components/admin/templates/sidenavs/assets-right-sidenav.template.html"},"subheader@main.asset":{templateUrl:"/app/components/admin/templates/subheader/asset-subheader.template.html"}},onExit:["$mdSidenav",function(e){var t=$('[md-component-id="left"]');t.hasClass("md-closed")&&t.hasClass("md-locked-open")||e("left").toggle()}]}).state("main.work-stations",{url:"work-stations",params:{departmentID:null},views:{"content-container":{templateUrl:"/app/components/admin/views/content-container.view.html",controller:"workStationsContentContainerController"},"toolbar@main.work-stations":{templateUrl:"/app/components/admin/templates/toolbar.template.html"},"content@main.work-stations":{templateUrl:"/app/components/admin/templates/content/work-stations.content.template.html"},"right-sidenav@main.work-stations":{templateUrl:"/app/components/admin/templates/sidenavs/work-stations.sidenav.html"}},onExit:["$mdSidenav",function(e){var t=$('[md-component-id="left"]');t.hasClass("md-closed")&&t.hasClass("md-locked-open")||e("left").toggle()}]}).state("main.work-station",{url:"work-station/{workStationID}",params:{workStationID:null},views:{"content-container":{templateUrl:"/app/components/admin/views/content-container.view.html",controller:"workStationContentContainerController"},"toolbar@main.work-station":{templateUrl:"/app/components/admin/templates/toolbar.template.html"},"content@main.work-station":{templateUrl:"/app/components/admin/templates/content/work-station.content.template.html"},"right-sidenav@main.work-station":{templateUrl:"/app/components/admin/templates/sidenavs/work-station.sidenav.html"}},onExit:["$mdSidenav",function(e){var t=$('[md-component-id="left"]');t.hasClass("md-closed")&&t.hasClass("md-locked-open")||e("left").toggle()}]}).state("main.purchase-orders",{url:"purchase-orders",views:{"content-container":{templateUrl:"/app/components/admin/views/content-container.view.html",controller:"purchaseOrdersContentContainerController"},"toolbar@main.purchase-orders":{templateUrl:"/app/components/admin/templates/toolbar.template.html"},"content@main.purchase-orders":{templateUrl:"/app/components/admin/templates/content/purchase-orders.content.template.html"},"right-sidenav@main.purchase-orders":{templateUrl:"/app/components/admin/templates/sidenavs/purchase-orders.sidenav.html"}},onExit:["$mdSidenav",function(e){var t=$('[md-component-id="left"]');t.hasClass("md-closed")&&t.hasClass("md-locked-open")||e("left").toggle()}]}).state("main.create-purchase-order",{url:"purchase-order/create",views:{"content-container":{templateUrl:"/app/components/admin/views/content-container.view.html",controller:"createPurchaseOrderContentContainerController"},"toolbar@main.create-purchase-order":{templateUrl:"/app/components/admin/templates/toolbar.template.html"},"content@main.create-purchase-order":{templateUrl:"/app/components/admin/templates/content/create-purchase-order-content.template.html"}},onExit:["$mdSidenav",function(e){var t=$('[md-component-id="left"]');t.hasClass("md-closed")&&t.hasClass("md-locked-open")||e("left").toggle()}]}).state("main.edit-purchase-order",{url:"purchase-order/{purchaseOrderID}/edit",params:{purchaseOrderID:null},views:{"content-container":{templateUrl:"/app/components/admin/views/content-container.view.html",controller:"editPurchaseOrderContentContainerController"},"toolbar@main.edit-purchase-order":{templateUrl:"/app/components/admin/templates/toolbar.template.html"},"content@main.edit-purchase-order":{templateUrl:"/app/components/admin/templates/content/create-purchase-order-content.template.html"}},onExit:["$mdSidenav",function(e){var t=$('[md-component-id="left"]');t.hasClass("md-closed")&&t.hasClass("md-locked-open")||e("left").toggle()}]}).state("main.asset-tag-purchase-order",{url:"purchase-order/{purchaseOrderID}/asset-tag",params:{purchaseOrderID:null},views:{"content-container":{templateUrl:"/app/components/admin/views/content-container.view.html",controller:"assetTagPurchaseOrderContentContainerController"},"toolbar@main.asset-tag-purchase-order":{templateUrl:"/app/components/admin/templates/toolbar.template.html"},"content@main.asset-tag-purchase-order":{templateUrl:"/app/components/admin/templates/content/asset-tag-purchase-order-content.template.html"}},onExit:["$mdSidenav",function(e){var t=$('[md-component-id="left"]');t.hasClass("md-closed")&&t.hasClass("md-locked-open")||e("left").toggle()}]}).state("main.units",{url:"assets/{assetID}/item/{unitID}",params:{assetID:null,unitID:null},views:{"content-container":{templateUrl:"/app/components/admin/views/content-container.view.html",controllerProvider:["$stateParams","assetService",function(e,t){var a=e.assetID-1;return t.unitContentContainerController(a)}]},"toolbar@main.units":{templateUrl:"/app/components/admin/templates/toolbar.template.html",controllerProvider:["$stateParams","assetService",function(e,t){var a=e.assetID-1;return t.unitToolbarController(a)}]},"content@main.units":{templateUrl:"/app/components/admin/templates/content/assets-unit.content.template.html"},"right-sidenav@main.units":{templateUrl:"/app/components/admin/templates/sidenavs/unit-right.sidenav.html",controllerProvider:["$stateParams","assetService",function(e,t){var a=e.assetID-1;return t.unitRightSidenavController(a)}]}},onExit:["$mdSidenav",function(e){var t=$('[md-component-id="left"]');t.hasClass("md-closed")&&t.hasClass("md-locked-open")||e("left").toggle()}]}).state("main.department",{url:"department/{departmentID}",params:{name:null},views:{"content-container":{templateUrl:"/app/components/admin/views/content-container.view.html",controller:"departmentContentContainerController"},"toolbar@main.department":{templateUrl:"/app/components/admin/templates/toolbar.template.html",controller:"departmentToolbarController"},"content@main.department":{templateUrl:"/app/components/admin/templates/content/department.content.template.html"}},onExit:["$mdSidenav",function(e){var t=$('[md-component-id="left"]');t.hasClass("md-closed")&&t.hasClass("md-locked-open")||e("left").toggle()}]})}]),adminModule.service("AssetTagService",["AssetTag","Preloader",function(e,t){var a=null,o=null,r=null;return{setStation:function(e){o=e},getStation:function(){return o},setType:function(e){a=e},getType:function(){return a},setID:function(e){r=e},getID:function(){return r}}}]),adminModule.service("assetService",["$http",function(e){var t=[{controller:"cpu"},{controller:"firewall"},{controller:"hardDisk"},{controller:"headset"},{controller:"keyboard"},{controller:"mac"},{controller:"memory"},{controller:"monitor"},{controller:"mouse"},{controller:"networkSwitch"},{controller:"portableHardDisk"},{controller:"printer"},{controller:"projector"},{controller:"router"},{controller:"scanner"},{controller:"software"},{controller:"speaker"},{controller:"telephone"},{controller:"ups"},{controller:"videoCard"},{controller:"otherComponent"}];return{get:function(){return t},toolbarController:function(e){return t[e].controller+"ToolbarController"},contentContainerController:function(e){return t[e].controller+"ContentContainerController"},contentController:function(e){return t[e].controller+"ContentController"},rightSidenavController:function(e){return t[e].controller+"RightSidenavController"},unitToolbarController:function(e){return t[e].controller+"UnitToolbarController"},unitContentContainerController:function(e){return t[e].controller+"UnitContentContainerController"},unitContentController:function(e){return t[e].controller+"UnitContentController"},unitRightSidenavController:function(e){return t[e].controller+"UnitRightSidenavController"}}}]),adminModule.service("departmentService",function(){var e=[];return{set:function(t){e=t},get:function(){return e}}}),adminModule.service("UserService",function(){var e=null;return{set:function(t){e=t},get:function(){return e}}}),adminModule.controller("assetTypeContentController",["$scope","$filter","$mdDialog","$state","$stateParams","AssetType","Asset","AssetTag","Preloader",function(e,t,a,o,r,n,s,i,l){var c=r.assetTypeID;e.state=o.current.name,e.showSubheader=!0,e.asset={},e.assetTag={},e.toolbar={},e.toolbar.parentState="Asset",e.toolbar.asset_type_id=c,e.toolbar.items=[],e.toolbar.searchAll=!0,e.toolbar.getItems=function(a){var o=a?t("filter")(e.toolbar.items,a):e.toolbar.items;return o},e.toolbar.subheader="Filters",e.toolbar.options=[{label:"Deployed",icon:"mdi-filter",action:function(){e.status="deployed"}},{label:"Stock",icon:"mdi-filter",action:function(){e.status="stock"}},{label:"Pulled Out",icon:"mdi-filter",action:function(){e.status="pulled out"}}],e.toolbar.refresh=function(){l.loading(),e.status="",e.init(!0)},e.showSearchBar=function(){e.searchBar=!0,e.asset.busy=!0,e.assetTag.busy=!0},e.hideSearchBar=function(){e.searchBar=!1,e.asset.busy=!1,e.assetTag.busy=!1,e.toolbar.searchText="",e.assetTag.searched&&(e.toolbar.refresh(),e.assetTag.searched=!1)},e.showAssetDetails=function(t){l.set(t),a.show({controller:"assetDetailsDialogController",templateUrl:"/app/components/admin/templates/dialogs/asset-details-dialog.template.html",parent:angular.element(document.body)}).then(function(t){if("edit"==t)a.show({controller:"editAssetDialogController",templateUrl:"/app/components/admin/templates/dialogs/asset-dialog.template.html",parent:angular.element(document.body)}).then(function(){l.toastChangesSaved(),e.toolbar.refresh()});else if("search"==t){l.loading();var o=l.get();e.assetTag.paginated.show=!1,e.assetTag.results=[],e.status="",e.toolbar.items=[],i.search(o).success(function(t){angular.forEach(t,function(e){u(e)}),e.assetTag.results=t,l.stop()}).error(function(){l.error()})}else{var r=a.confirm().title("Delete").textContent("This asset will be removed.").ariaLabel("Delete").ok("Delete").cancel("Cancel");a.show(r).then(function(){var t=l.get();s["delete"](t).success(function(){e.toolbar.refresh(),l.deleted()}).error(function(){l.error()})},function(){})}},function(){})},e.purchaseOrder=function(e){o.go("main.asset-tag-purchase-order",{purchaseOrderID:e})};var u=function(t,a){if("asset"==a){var o={};o.display=t.model,o.subItem=t.brand,t.first_letter=t.brand.charAt(0).toUpperCase(),t.updated_at=new Date(t.updated_at)}else{var o={};o.display=t.property_code,t.first_letter=t.asset.brand.charAt(0).toUpperCase(),t.warranty_end=t.warranty_end?new Date(t.warranty_end):null,t.current_status=t.status.length?"Pulled Out":t.work_station_id?"Deployed":"Stock"}e.toolbar.items.push(o)};e.searchUserInput=function(){l.loading(),e.status="",e.assetTag.paginated.show=!1,e.toolbar.items=[],i.search(e.toolbar).success(function(t){angular.forEach(t,function(e){u(e)}),e.assetTag.results=t,e.assetTag.searched=!0,l.stop()}).error(function(){l.error()})},e.fab={},e.fab.label="Create",e.fab.icon="mdi-plus",e.fab.action=function(){a.show({controller:"createAssetDialogController",templateUrl:"/app/components/admin/templates/dialogs/asset-dialog.template.html",parent:angular.element(document.body)}).then(function(t){e.toolbar.refresh()},function(){})},e.editAssetTag=function(t){l.set(t),a.show({controller:"editAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/edit-asset-tag-dialog.template.html",parent:angular.element($("body"))}).then(function(){l.toastChangesSaved(),e.assetTag.searched?e.searchUserInput():e.toolbar.refresh()})},e.transferAssetTag=function(t){l.set(t),a.show({controller:"transferAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/transfer-asset-tag-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.swapAssetTag=function(t){l.set(t),a.show({controller:"swapAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/swap-asset-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.pullOutAssetTag=function(t){l.set(t),a.show({controller:"pullOutAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/pull-out-asset-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.deleteAssetTag=function(t){var o=a.confirm().title("Delete").content("Are you sure you want to delete this asset tag?").ariaLabel("Delete Asset Tag").ok("Delete").cancel("Cancel");a.show(o).then(function(){i["delete"](t).success(function(){e.toolbar.refresh()}).error(function(){l.error()})},function(){})},e.repaired=function(t){var o=a.confirm().title("Repaired").content("Confirm that this asset is repaired?").ariaLabel("Repaired").ok("Yes").cancel("No");a.show(o).then(function(){i.repair(t).success(function(){e.toolbar.refresh()}).error(function(){l.error()})},function(){})},e.pullOutDetails=function(t){l.set(t),a.show({controller:"pullOutDetailsDialogController",templateUrl:"/app/components/admin/templates/dialogs/pull-out-details-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.rightSidenav={},e.rightSidenav.show=!0,e.init=function(t){n.show(c).then(function(t){e.assetType=t.data,e.toolbar.childState=t.data.type}).then(function(){e.asset.paginated=[],e.toolbar.items=[],e.asset.page=2,s.paginate(c).success(function(a){e.asset.details=a,e.asset.paginated=a.data,e.asset.show=!0,a.data.length&&(angular.forEach(a.data,function(e){u(e,"asset")}),e.fab.show=!0),e.asset.paginateLoad=function(){e.asset.busy||e.asset.page>e.asset.details.last_page||(e.asset.busy=!0,s.paginate(c,e.asset.page).success(function(t){e.asset.page++,angular.forEach(t.data,function(t){u(t,"asset"),e.asset.paginated.push(t)}),e.asset.busy=!1}).error(function(){l.error()}))},t&&(l.stop(),l.stop())}).error(function(){l.error()}),e.assetTag.paginated=[],e.toolbar.items=[],e.assetTag.page=2,i.paginate(c).success(function(a){e.assetTag.details=a,e.assetTag.paginated=a.data,e.assetTag.paginated.show=!0,a.data.length&&angular.forEach(a.data,function(e){u(e,"asset_tag")}),e.assetTag.paginateLoad=function(){e.assetTag.busy||e.assetTag.page>e.assetTag.details.last_page||(e.assetTag.busy=!0,i.paginate(c,e.assetTag.page).success(function(t){e.assetTag.page++,angular.forEach(t.data,function(t){u(t,"asset_tag"),e.assetTag.paginated.push(t)}),e.assetTag.busy=!1}).error(function(){l.error()}))},t&&(l.stop(),l.stop())}).error(function(){l.error()})})},e.init()}]),adminModule.controller("addEmployeeDialogController",["$scope","$stateParams","$mdDialog","Preloader","Department","Employee",function(e,t,a,o,r,n){e.employee={},e.employee.department_id=t.departmentID,r.show(t.departmentID).success(function(t){e.department=t}),e.cancel=function(){a.cancel()},e.submit=function(){o.preload(),n.store(e.employee).then(function(){o.stop()},function(){o.error()})}}]),adminModule.controller("departmentContentContainerController",["$scope","$stateParams","$mdDialog","Preloader","Employee","UserService",function(e,t,a,o,r,n){var s=t.departmentID;e.subheader={},e.subheader.state="departments",e.subheader.refresh=function(){o.preload(),e.employee.paginated={},e.employee.page=2,r.paginateDepartment(s).then(function(t){e.employee.paginated=t.data,e.employee.paginated.show=!0,o.stop()},function(){o.error()})},e.fab={},e.fab.icon="mdi-plus",e.fab.label="Add",e.fab.show=!0,e.fab.action=function(){a.show({controller:"addEmployeeDialogController",templateUrl:"/app/components/admin/templates/dialogs/add-employee-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.subheader.refresh()})},e.rightSidenav={},e.rightSidenav.show=!1,e.employee={},e.employee.page=2,r.paginateDepartment(s).then(function(t){e.employee.paginated=t.data,e.employee.paginated.show=!0,e.employee.paginateLoad=function(){e.employee.busy||e.employee.page>e.employee.paginated.last_page||(e.employee.busy=!0,r.paginateDepartment(s,e.employee.page).then(function(t){e.employee.page++,angular.forEach(t.data.data,function(t,a){e.employee.paginated.data.push(t)}),e.employee.busy=!1,console.log("loaded")}))}},function(){o.error()}),e.searchBar=!1,e.showSearchBar=function(){e.searchBar=!0},e.hideSearchBar=function(){e.employee.userInput="",e.searchBar=!1},e.searchUserInput=function(){e.employee.paginated.show=!1,o.preload(),r.search(s,e.employee).success(function(t){e.employee.results=t,o.stop()}).error(function(e){o.error()})},e.show=function(e){n.set(e),a.show({controller:"showEmployeeDialogController",templateUrl:"/app/components/admin/templates/dialogs/show-employee-dialog.template.html",parent:angular.element($("body")),clickOutsideToClose:!0})}}]),adminModule.controller("departmentToolbarController",["$scope","$stateParams","Department","departmentService",function(e,t,a,o){e.toolbar={};var r=t.departmentID-1;e.toolbar.parentState="Departments";var n=o.get();n.length?e.toolbar.childState=n[r].name:a.index().success(function(t){n=t,e.toolbar.childState=n[r].name}).error(function(e){Preload.error()})}]),adminModule.controller("showEmployeeDialogController",["$scope","$mdDialog","$stateParams","UserService","EmployeeTag","Employee",function(e,t,a,o,r,n){var s=o.get();e.cancel=function(){t.cancel()},n.show(s).success(function(t){e.employee=t}),r.employee(s).success(function(t){e.workstation=t})}]),adminModule.controller("createPurchaseOrderContentContainerController",["$scope","$state","$mdToast","Preloader","PurchaseOrder","AssetType","Asset","AssetDetail","Vendor","AssetPurchaseOrder",function(e,t,a,o,r,n,s,i,l,c){e.toolbar={},e.toolbar.childState="Create Purchase Order",e.toolbar.showBack=!0,e.toolbar.back=function(){t.go("main.purchase-orders")},e.toolbar.refresh=function(){t.go("main.create-purchase-order",{},{reload:!0})},e.toolbar.hideSearchIcon=!0,e.fab={},e.fab.icon="mdi-check",e.fab.label="Submit",e.fab.show=!0,e.fab.action=function(){e.submit()};var u=!1;e.form={},e.purchaseOrder={},e.purchaseOrder.date_purchased=new Date,e.purchaseOrder.date_arrival=new Date,e.purchaseOrder.date_arrival.setDate(e.purchaseOrder.date_arrival.getDate()+30),e.label="Purchase Order",e.assets=[],e.addAsset=function(){e.assets.push({assetTypeIndex:null,brand:null,asset_id:null,quantity:null})},e.removeAsset=function(t){e.assets.splice(t,1)},e.getUniqueBrands=function(t,a){e.assets[a].brand=null,e.purchaseOrder.asset_id=null,e.assets[a].details=[],s.brands(e.assetTypes[t].id).success(function(t){e.assets[a].brands=t}).error(function(){o.error()})},e.getAssetDetails=function(t,a){i.show(t).success(function(t){e.assets[a].details=t}).error(function(){o.error()})},e.submit=function(){e.form.purchaseOrderForm.$invalid?angular.forEach(e.form.purchaseOrderForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):(o.saving(),u||(u=!0,e.purchaseOrder.date_purchased=e.purchaseOrder.date_purchased.toDateString(),e.purchaseOrder.date_arrival=e.purchaseOrder.date_arrival.toDateString(),r.store(e.purchaseOrder).then(function(e){return e.data}).then(function(t){angular.forEach(e.assets,function(e){e.purchase_order_id=t.id}),c.store(e.assets).success(function(){u=!1,o.stop(),a.simple().textContent("Saved successfuly.").position("bottom right").hideDelay(3e3),e.toolbar.back()}).error(function(){u=!1,o.error()})},function(){u=!1,o.error()})))},e.init=function(){l.index().then(function(t){e.vendors=t.data}).then(function(){n.index().success(function(t){e.assetTypes=t,e.show=!0})},function(){o.error()}),e.addAsset()}()}]),adminModule.controller("editPurchaseOrderContentContainerController",["$scope","$filter","$state","$stateParams","$mdToast","Preloader","PurchaseOrder","AssetType","Asset","AssetDetail","Vendor","AssetPurchaseOrder",function(e,t,a,o,r,n,s,i,l,c,u,d){var p=o.purchaseOrderID;e.toolbar={},e.toolbar.parentState="Update Purchase Order",e.toolbar.showBack=!0,e.toolbar.back=function(){a.go("main.purchase-orders")},e.toolbar.refresh=function(){e.init(!0)},e.toolbar.hideSearchIcon=!0,e.fab={},e.fab.icon="mdi-check",e.fab.label="Submit",e.fab.show=!0,e.fab.action=function(){e.submit()};var m=!1;e.form={},e.purchaseOrder={},e.purchaseOrder.date_purchased=new Date,e.purchaseOrder.date_arrival=new Date,e.purchaseOrder.date_arrival.setDate(e.purchaseOrder.date_arrival.getDate()+30),e.label="Purchase Order",e.assets=[],e.addAsset=function(){e.assets.push({assetTypeIndex:null,brand:null,asset_id:null,quantity:null})},e.removeAsset=function(t){e.assets.splice(t,1)},e.getUniqueBrands=function(t,a){e.assets[a].brand=null,e.purchaseOrder.asset_id=null,e.assets[a].details=[],l.brands(e.assetTypes[t].id).success(function(t){e.assets[a].brands=t}).error(function(){n.error()})},e.getAssetDetails=function(t,a){c.show(t).success(function(t){e.assets[a].details=t}).error(function(){n.error()})},e.submit=function(){e.form.purchaseOrderForm.$invalid?angular.forEach(e.form.purchaseOrderForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):(n.saving(),m||(m=!0,e.purchaseOrder.date_purchased=e.purchaseOrder.date_purchased.toDateString(),e.purchaseOrder.date_arrival=e.purchaseOrder.date_arrival.toDateString(),s.update(p,e.purchaseOrder).then(function(e){return e.data}).then(function(t){angular.forEach(e.assets,function(e){e.purchase_order_id=t.id}),d.update(p,e.assets).success(function(){m=!1,n.stop(),r.simple().textContent("Saved successfuly.").position("bottom right").hideDelay(3e3),e.toolbar.back()}).error(function(){m=!1,n.error()})},function(){m=!1,n.error()})))},e.init=function(){u.index().then(function(t){e.vendors=t.data}).then(function(){i.index().success(function(a){e.assetTypes=a,s.show(p).success(function(a){e.toolbar.childState=a.tracking_code?a.tracking_code:"N/A",a.date_purchased=new Date(a.date_purchased),a.date_arrival=new Date(a.date_arrival),e.purchaseOrder=a,e.assets=a.asset_purchase_order,angular.forEach(e.assets,function(a){var o=t("filter")(e.assetTypes,{type:a.asset.type.type});a.assetTypeIndex=e.assetTypes.indexOf(o[0]),l.brands(e.assetTypes[a.assetTypeIndex].id).success(function(e){a.brands=e;var o=t("filter")(e,{brand:a.asset.brand});a.brand=a.brands[a.brands.indexOf(o[0])].brand}).error(function(){n.error()})}),e.show=!0}).error(function(){n.error()})}).error(function(){n.error()})})},e.init()}]),adminModule.controller("purchaseOrdersContentContainerController",["$scope","$filter","$state","$mdDialog","PurchaseOrder","Preloader","Vendor",function(e,t,a,o,r,n,s){e.months=["January","February","March","April","May","June","July","August","September","October","November","December"],e.currentMonth=e.months[(new Date).getMonth()];var i=2015;e.years=[];for(var l=(new Date).getFullYear();l>=i;l--)e.years.push(l);e.toolbar={},e.toolbar.childState="Purchase Orders",e.toolbar.searchAll=!0,e.toolbar.items=[],e.toolbar.getItems=function(a){var o=a?t("filter")(e.toolbar.items,a):e.toolbar.items;return o},e.toolbar.refresh=function(){n.loading(),e.init(!0)},e.rightSidenav={},e.rightSidenav.show=!0,e.showSearchBar=function(){e.purchaseOrder.busy=!0,e.searchBar=!0},e.hideSearchBar=function(){e.purchaseOrder.busy=!1,e.searchBar=!1,e.toolbar.searchText="",e.purchaseOrder.searched&&(e.toolbar.refresh(),e.purchaseOrder.searched=!1)};var c=function(t){if(t.tracking_code){var a={};a.display=t.tracking_code,e.toolbar.items.push(a)}return angular.forEach(t.asset_purchase_order,function(t){var a={};a.display=t.asset.model,a.brand=t.asset.brand,e.toolbar.items.push(a)}),t.first_letter=t.vendor.company.charAt(0).toUpperCase(),t.updated_at=new Date(t.updated_at),t.date_arrival=new Date(t.date_arrival),t.date_purchased=new Date(t.date_purchased),t.month_arrival=e.months[t.date_arrival.getMonth()],t.month_purchased=e.months[t.date_purchased.getMonth()],t.year_arrival=t.date_arrival.getFullYear(),t.year_purchased=t.date_purchased.getFullYear(),t};e.searchUserInput=function(){e.purchaseOrder.paginated.show=!1,n.loading(),r.search(e.toolbar).success(function(t){angular.forEach(t,function(e){c(e)}),e.purchaseOrder.results=t,n.stop(),e.purchaseOrder.searched=!0}).error(function(e){n.error()})},e.createPurchaseOrder=function(){a.go("main.create-purchase-order")},e.editPurchaseOrder=function(e){a.go("main.edit-purchase-order",{purchaseOrderID:e})},e.deletePurchaseOrder=function(t){var a=o.confirm().title("Delete").textContent("Are you sure you want to remove this purchase order?").ariaLabel("Delete").ok("Delete").cancel("Cancel");o.show(a).then(function(){r["delete"](t).success(function(){e.toolbar.refresh(),n.deleted()}).error(function(){n.error()})},function(){})},e.assetTag=function(e){a.go("main.asset-tag-purchase-order",{purchaseOrderID:e})},e.fab={},e.fab.icon="mdi-plus",e.fab.label="Purchase Order",e.fab.action=function(){e.createPurchaseOrder()},e.removeFilter=function(){e.filter={}},e.searchFilter=function(){e.purchaseOrder.paginated.show=!1,n.loading(),r.filterSearch(e.filter).success(function(t){angular.forEach(t,function(e){c(e)}),e.purchaseOrder.results=t,n.stop(),e.purchaseOrder.searched=!0}).error(function(){n.error()})},e.init=function(t){e.filter={},e.purchaseOrder={},e.purchaseOrder.page=2,r.paginate().success(function(a){e.purchaseOrder.details=a,e.purchaseOrder.paginated=a.data,e.purchaseOrder.paginated.show=!0,a.data.length&&(angular.forEach(a.data,function(e){c(e)}),e.fab.show=!0),e.purchaseOrder.paginateLoad=function(){e.purchaseOrder.busy||e.purchaseOrder.page>e.purchaseOrder.details.last_page||(e.purchaseOrder.busy=!0,r.paginate(e.purchaseOrder.page).success(function(t){e.purchaseOrder.page++,angular.forEach(t.data,function(t,a){c(t),e.purchaseOrder.paginated.data.push(t)}),e.purchaseOrder.busy=!1}))},t&&(n.stop(),n.stop())}).error(function(){n.error()}),s.index().success(function(t){e.vendors=t})},e.init()}]),adminModule.controller("settingsContentContainerController",["$scope","$state","$filter","$mdDialog","Preloader","Department","AssetType","User","Vendor",function(e,t,a,o,r,n,s,i,l){e.toolbar={},e.toolbar.childState="Settings",e.toolbar.items=[],e.toolbar.getItems=function(t){var o=t?a("filter")(e.toolbar.items,t):e.toolbar.items;return o},e.showSearchBar=function(){e.searchBar=!0},e.hideSearchBar=function(){e.searchBar=!1,e.toolbar.searchText=""},e.subheader={},e.toolbar.refresh=function(){e.departments=[],e.asset_types=[],r.loading(),e.init(!0)},e.createDepartment=function(){o.show({controller:"createDepartmentDialogController",templateUrl:"/app/components/admin/templates/dialogs/department-dialog.template.html",parent:angular.element(document.body)}).then(function(){e.toolbar.refresh()},function(){})},e.editDepartment=function(t){r.set(t),o.show({controller:"editDepartmentDialogController",templateUrl:"/app/components/admin/templates/dialogs/department-dialog.template.html",parent:angular.element(document.body)}).then(function(){e.toolbar.refresh(),r.toastChangesSaved()},function(){})},e.deleteDepartment=function(t){var a=o.confirm().title("Delete").textContent("This department will be removed from the list.").ariaLabel("Delete department").ok("Delete").cancel("Cancel");o.show(a).then(function(){n["delete"](t).success(function(){e.toolbar.refresh(),r.deleted()}).error(function(){r.error()})},function(){})},e.createAssetType=function(){o.show({controller:"createAssetTypeDialogController",templateUrl:"/app/components/admin/templates/dialogs/asset-type-dialog.template.html",parent:angular.element(document.body)}).then(function(){e.toolbar.refresh(),t.go(t.current,{},{reload:!0})},function(){})},e.editAssetType=function(a){r.set(a),o.show({controller:"editAssetTypeDialogController",templateUrl:"/app/components/admin/templates/dialogs/asset-type-dialog.template.html",parent:angular.element(document.body)}).then(function(){e.toolbar.refresh(),t.go(t.current,{},{reload:!0}),r.toastChangesSaved()},function(){})},e.deleteAssetType=function(a){var n=o.confirm().title("Delete").textContent("This asset will be removed from the list.").ariaLabel("Delete Asset Type").ok("Delete").cancel("Cancel");o.show(n).then(function(){s["delete"](a).success(function(){e.toolbar.refresh(),t.go(t.current,{},{reload:!0}),r.deleted()}).error(function(){r.error()})},function(){})},e.createUser=function(){o.show({controller:"createUserDialogController",templateUrl:"/app/components/admin/templates/dialogs/user-dialog.template.html",parent:angular.element(document.body)}).then(function(){e.toolbar.refresh(),t.go(t.current,{},{reload:!0})},function(){})},e.resetPassword=function(e){var t=o.confirm().title("Reset Password").textContent("Reset the password for this account?").ariaLabel("Reset Password").ok("Reset").cancel("Cancel");o.show(t).then(function(){i.resetPassword(e).success(function(){r.toastChangesSaved()}).error(function(){r.error()})},function(){})},e.deleteAccount=function(a){var n=o.confirm().title("Delete Account").textContent("This account will be removed permanently.").ariaLabel("Delete Account").ok("Delete").cancel("Cancel");o.show(n).then(function(){i["delete"](a).success(function(){e.toolbar.refresh(),t.go(t.current,{},{reload:!0}),r.deleted()}).error(function(){r.error()})},function(){})},e.createVendor=function(){o.show({controller:"createVendorDialogController",templateUrl:"/app/components/admin/templates/dialogs/vendor-dialog.template.html",parent:angular.element(document.body)}).then(function(){e.toolbar.refresh()},function(){})},e.editVendor=function(t){r.set(t),o.show({controller:"editVendorDialogController",templateUrl:"/app/components/admin/templates/dialogs/vendor-dialog.template.html",parent:angular.element(document.body)}).then(function(){e.toolbar.refresh(),r.toastChangesSaved()},function(){})},e.deleteVendor=function(t){var a=o.confirm().title("Delete").textContent("This vendor will be removed from the list.").ariaLabel("Delete Vendor").ok("Delete").cancel("Cancel");o.show(a).then(function(){l["delete"](t).success(function(){e.toolbar.refresh(),r.deleted()}).error(function(){r.error()})},function(){})};var c=function(e){return angular.forEach(e,function(e){e.first_letter=e.name?e.name.charAt(0).toUpperCase():e.type?e.type.charAt(0).toUpperCase():e.first_name?e.first_name.charAt(0).toUpperCase():e.company.charAt(0).toUpperCase(),e.created_at=new Date(e.created_at);
}),e};e.init=function(t){n.index().then(function(t){c(t.data),e.departments=t.data,angular.forEach(t.data,function(t){var a={};a.display=t.name,e.toolbar.items.push(a)})}).then(function(){s.index().success(function(t){c(t),e.asset_types=t,angular.forEach(t,function(t){var a={};a.display=t.type,e.toolbar.items.push(a)}),e.toolbar.getItems()})}).then(function(){i.others().success(function(t){c(t.data),e.users=t,angular.forEach(t,function(t){var a={};a.display=t.first_name,e.toolbar.items.push(a)})}).error(function(){r.error()})}).then(function(){l.index().success(function(a){c(a.data),angular.forEach(a,function(t){var a={};a.display=t.company,e.toolbar.items.push(a)}),e.vendors=a,t&&(r.stop(),r.stop())})},function(){r.error()})},e.init()}]),adminModule.controller("barcodeDialogController",["$scope","$mdDialog",function(e,t){e.cancel=function(){t.cancel()},e.barcode={},e.barcode.category="assets",e.max=99999,e.floors=["06","10"],e.divisions=["A","B"],e.types=[{name:"Admin",value:"A"},{name:"Production",value:"P"}],e.checkMax=function(){"workstation"==e.barcode.category?e.max=999:e.max=99999},e.submit=function(){if(e.detailsForm.$invalid)angular.forEach(e.detailsForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})});else{if("assets"==e.barcode.category){var a=window.open("/barcode-assets/"+e.barcode.format+"/starting-point/"+e.barcode.starting_point+"/quantity/"+e.barcode.quantity,"_blank");a.focus()}else{var a=window.open("/barcode-work-station/"+e.barcode.floor+"/division/"+e.barcode.division+"/type/"+e.barcode.type+"/starting-point/"+e.barcode.starting_point+"/quantity/"+e.barcode.quantity,"_blank");a.focus()}t.hide()}}}]),adminModule.controller("leftSidenavController",["$scope","$state","$mdSidenav","AssetType",function(e,t,a,o){e.menu={},e.state=t.current.name,e.menu["static"]=[{state:"main",icon:"mdi-view-dashboard",label:"Dashboard"},{state:"main.purchase-orders",icon:"mdi-format-list-numbers",label:"Purchase Orders"},{state:"main.work-stations",icon:"mdi-desktop-tower",label:"Work Stations"},{state:"main.settings",icon:"mdi-settings",label:"Settings"}],e.menu.section=[{name:"Assets",icon:"mdi-desktop-mac"}],e.menu.pages=[],o.index().success(function(t){e.menu.pages.push(t)}),e.setActive=function(e){angular.element($('[aria-label="section-'+e+'"]').closest("li").toggleClass("active")),angular.element($('[aria-label="section-'+e+'"]').closest("li").siblings().removeClass("active"))}}]),adminModule.controller("mainContentContainerController",["$scope","$state","$mdDialog","Preloader","InventoryReport","Activity",function(e,t,a,o,r,n){e.toolbar={},e.toolbar.childState="Dashboard",e.toolbar.subheader="Options",e.toolbar.options=[{label:"Download Report",icon:"mdi-download",action:function(){var e=window.open("/inventory-report/","_blank");e.focus()}},{label:"Sticker Generator",icon:"mdi-barcode",action:function(){a.show({controller:"barcodeDialogController",templateUrl:"/app/components/admin/templates/dialogs/barcode-dialog.template.html",parent:angular.element(document.body)})}}],e.toolbar.refresh=function(){o.loading(),e.init(!0)},e.toolbar.hideSearchIcon=!0,e.searchBar=!1,e.showSearchBar=function(){e.searchBar=!0},e.hideSearchBar=function(){e.toolbar.searchText="",e.searchBar=!1},e.rightSidenav={},e.rightSidenav.show=!0,e.show=function(e){o.set(e),a.show({controller:"activityDialogController",templateUrl:"/app/components/admin/templates/dialogs/activity-dialog.template.html",parent:angular.element(document.body),clickOutsideToClose:!0})},e.chartWeekly=function(e){console.log(e)},e.init=function(t){e.months=["January","February","March","April","May","June","July","August","September","October","November","December"],e.currentMonth=e.months[(new Date).getMonth()],e.charts=[{title:"Purchase Orders",monthly:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"]},weekly:{labels:[]}},{title:"Asset Tags",monthly:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],series:["Deployed","Stock","Pulled Out"]},weekly:{series:["Deployed","Stock","Pulled Out"],labels:[]}},{title:"Activities",monthly:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"]},weekly:{labels:[]}}],r.dashboard().then(function(t){angular.forEach(t.data.warranty,function(e){e.warranty_end=new Date(e.warranty_end)}),e.dashboard=t.data,e.charts[0].monthly.data=t.data.purchase_order_array[1],e.charts[1].monthly.data=t.data.asset_tag_array[1],e.charts[2].monthly.data=t.data.activity_array[1],angular.forEach(t.data.week_ranges,function(t){e.charts[0].weekly.labels.push(t),e.charts[1].weekly.labels.push(t),e.charts[2].weekly.labels.push(t)}),e.charts[0].weekly.data=t.data.purchase_order_array[0],e.charts[1].weekly.data=t.data.asset_tag_array[0],e.charts[2].weekly.data=t.data.activity_array[0]}).then(function(){e.activity={},e.activity.page=2,n.paginate().success(function(a){e.activity.details=a,e.activity.paginated=a.data,e.activity.paginated.show=!0,a.data.length&&angular.forEach(a.data,function(e){e.created_at=new Date(e.created_at),e.first_letter=e.user.first_name[0].toUpperCase()}),e.activity.paginateLoad=function(){e.activity.busy||e.activity.page>e.activity.details.last_page||(e.activity.busy=!0,n.paginate(e.activity.page).success(function(t){e.activity.page++,angular.forEach(t.data,function(t,a){t.created_at=new Date(t.created_at),t.first_letter=t.user.first_name[0].toUpperCase(),e.activity.paginated.push(t)}),e.activity.busy=!1}))},t&&(o.stop(),o.stop())}).error(function(){o.error()})})},e.init()}]),adminModule.controller("mainViewController",["$scope","$mdDialog","$mdSidenav","User","Preloader",function(e,t,a,o,r){o.index().success(function(t){e.user=t,r.setUser(t)}),e.toggleSidenav=function(e){a(e).toggle()},e.changePassword=function(){t.show({controller:"changePasswordDialogController",templateUrl:"/app/components/admin/templates/dialogs/change-password-dialog.template.html",parent:angular.element(document.body)}).then(function(){$mdToast.show($mdToast.simple().content("Password changed.").position("bottom right").hideDelay(3e3))})}}]),adminModule.controller("addWorkStationDialogController",["$scope","$stateParams","$mdDialog","Preloader","WorkStation",function(e,t,a,o,r){var n=!1;e.workStation={},e.floors=[{pattern:6,value:"06"},{pattern:10,value:"10"}],e.divisions=["A","B"],e.types=[{pattern:"Admin",value:"A"},{pattern:"Production",value:"P"}],e.patterns=[{pattern:"A06-A-A***",value:"A06-A-A",meaning:"Aeon 6th Floor - Division A - Admin Station Number"},{pattern:"A06-A-P***",value:"A06-A-P",meaning:"Aeon 6th Floor - Division A - Production Station Number"},{pattern:"A10-A-P***",value:"A10-A-P",meaning:"Aeon 10th Floor - Division A - Production Station Number"},{pattern:"A06-B-A***",value:"A06-B-A",meaning:"Aeon 6th Floor - Division B - Admin Station Number"},{pattern:"A06-B-P***",value:"A06-B-P",meaning:"Aeon 6th Floor - Division B - Production Station Number"}],e.cancel=function(){a.cancel()},e.submit=function(){e.addWorkStationForm.$invalid?angular.forEach(e.addWorkStationForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):n||(n=!0,o.saving(),r.store(e.workStation).success(function(){n=!1,o.stop()}).error(function(){n=!1,o.error()}))}}]),adminModule.controller("departmentWorkStationDialogController",["$scope","$mdDialog","Preloader","WorkStation","DepartmentWorkStation","Department",function(e,t,a,o,r,n){var s=a.get(),i=!1;e.init=function(){n.index().then(function(t){e.departments=t.data}).then(function(){o.show(s).success(function(t){e.workStation=t,e.workStation.departments=[],r.show(s).success(function(t){e.workStation.departments=t})}).error(function(){a.error()})},function(){a.error()})}(),e.checkIP=function(){e.duplicate=!1,o.checkIP(s,e.workStation).success(function(t){e.duplicate=t}).error(function(){a.error()})},e.cancel=function(){t.cancel()},e.submit=function(){e.show=!0,e.workStationForm.$invalid?angular.forEach(e.workStationForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):i||e.duplicate||!e.workStation.departments.length||(i=!0,o.update(s,e.workStation).then(function(e){return e.data}).then(function(t){t?i=!1:(angular.forEach(e.workStation.departments,function(e,t){e.work_station_id=s}),r.store(e.workStation.departments).success(function(){i=!1,a.stop()}).error(function(){a.error(),i=!1}))},function(){a.error(),i=!1}))}}]),adminModule.controller("tagWorkStationDialogController",["$scope","$stateParams","$mdDialog","Preloader","WorkStation","WorkStationTag","Department",function(e,t,a,o,r,n,s){var i=t.departmentID;e.workStationTag={},e.workStationTag.department_id=t.departmentID,e.divisions=[{name:"Block A",value:"A"},{name:"Block B",value:"B"}],e.types=[{name:"Admin",value:"admin"},{name:"Production",value:"production"}],e.searchWorkStations=function(){r.vacant(e.workStationTag).success(function(t){e.workStations=t}).error(function(){o.error()})},s.show(i).success(function(t){e.department=t}),e.cancel=function(){a.cancel()},e.submit=function(){o.preload(),n.store(e.workStationTag).success(function(){o.stop()}).error(function(){o.error()})}}]),adminModule.controller("workStationsContentContainerController",["$scope","$filter","$state","$mdDialog","Preloader","WorkStation","Department","DepartmentWorkStation",function(e,t,a,o,r,n,s,i){e.toolbar={},e.toolbar.childState="Work Stations",e.toolbar.searchAll=!0,e.toolbar.items=[],e.toolbar.getItems=function(a){var o=a?t("filter")(e.toolbar.items,a):e.toolbar.items;return o},e.toolbar.refresh=function(){e.rightSidenav.department="",r.loading(),e.init(!0)},e.showSearchBar=function(){e.workStation.busy=!0,e.searchBar=!0},e.hideSearchBar=function(){e.workStation.busy=!1,e.searchBar=!1,e.toolbar.searchText="",e.workStation.searched&&(e.toolbar.refresh(),e.workStation.searched=!1)};var l=function(t,a){var o={};o.display=t.name,o.subItem=t.ip_address,t.first_letter=t.name.charAt(4).toUpperCase(),t.updated_at=new Date(t.updated_at),e.toolbar.items.push(o)};e.searchUserInput=function(){e.workStation.paginated.show=!1,r.loading(),n.search(e.toolbar).success(function(t){angular.forEach(t,function(e){l(e)}),e.workStation.results=t,r.stop(),e.workStation.searched=!0}).error(function(e){r.error()})},e.createWorkStation=function(){o.show({controller:"addWorkStationDialogController",templateUrl:"/app/components/admin/templates/dialogs/add-work-station-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.show=function(e,t){t?a.go("main.work-station",{workStationID:e}):(r.set(e),o.show({controller:"departmentWorkStationDialogController",templateUrl:"/app/components/admin/templates/dialogs/update-work-station-dialog.template.html",parent:angular.element($("body"))}).then(function(){r.toastChangesSaved(),a.go("main.work-station",{workStationID:e})}))},e.fab={},e.fab.icon="mdi-plus",e.fab.label="Work Station",e.fab.action=function(){e.createWorkStation()},e.rightSidenav={},e.rightSidenav.show=!0,e.filterWorkStation=function(t){r.loading(),e.workStation.paginated.show=!1,i.department(t).success(function(t){results=[],angular.forEach(t,function(e){l(e.work_station),results.push(e.work_station)}),e.workStation.results=results,r.stop(),e.workStation.searched=!0})},e.init=function(t){s.index().then(function(t){angular.forEach(t.data,function(e){e.first_letter=e.name.charAt(0).toUpperCase()}),e.departments=t.data}).then(function(){e.charts=[{labels:["Occupied","Vacant"],location:"6th Floor A",data:[0,0]},{labels:["Occupied","Vacant"],location:"6th Floor B",data:[0,0]},{labels:["Occupied","Vacant"],location:"10th Floor A",data:[0,0]},{labels:["Occupied","Vacant"],location:"10th Floor B",data:[0,0]}],n.dashboard().success(function(t){e.charts[0].data[0]=t.occupied_6FA_count,e.charts[0].data[1]=t.vacant_6FA_count,e.charts[1].data[0]=t.occupied_6FB_count,e.charts[1].data[1]=t.vacant_6FB_count,e.charts[2].data[0]=t.occupied_10FA_count,e.charts[2].data[1]=t.vacant_10FA_count,e.charts[3].data[0]=t.occupied_10FB_count,e.charts[3].data[1]=t.vacant_10FB_count}).error(function(){r.error()})}).then(function(){e.workStation={},e.workStation.paginated=[],e.workStation.page=2,n.paginate().success(function(a){e.workStation.details=a,e.workStation.paginated=a.data,e.workStation.paginated.show=!0,a.data.length&&(angular.forEach(a.data,function(e){l(e)}),e.fab.show=!0),e.workStation.paginateLoad=function(){e.workStation.busy||e.workStation.page>e.workStation.details.last_page||(e.workStation.busy=!0,n.paginate(e.workStation.page).success(function(t){e.workStation.page++,angular.forEach(t.data,function(t,a){l(t),e.workStation.paginated.push(t)}),e.workStation.busy=!1}))},t&&(r.stop(),r.stop())}).error(function(){r.error()})})},e.init()}]),adminModule.controller("assetDetailsDialogController",["$scope","$mdDialog","Asset","Preloader",function(e,t,a,o){var r=o.get();e.cancel=function(){t.cancel()},a.show(r).success(function(t){e.asset=t,e.label=t.type.type,e.asset.first_letter=t.brand[0].toUpperCase()}).error(function(){o.error()}),e.edit=function(){o.set(e.asset),t.hide("edit")},e["delete"]=function(){o.set(r),t.hide("delete")},e.search=function(){o.set(e.asset),t.hide("search")}}]),adminModule.controller("createAssetDialogController",["$scope","$stateParams","$mdDialog","Asset","AssetDetail","Preloader",function(e,t,a,o,r,n){e.asset={},e.asset.asset_type_id=t.assetTypeID,e.details=[],e.label="New";var s=!1;e.addDetail=function(){e.details.push({label:null,value:null})},e.removeDetail=function(t){e.details.splice(t,1)},e.cancel=function(){a.cancel()},e.checkDuplicate=function(){e.duplicate=!1,o.checkDuplicate(e.asset).success(function(t){e.duplicate=t})},e.submit=function(){e.assetForm.$invalid?angular.forEach(e.assetForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):s||e.duplicate||(s=!0,o.store(e.asset).then(function(e){return e.data}).then(function(t){e.details.length||"string"!=typeof t?(e.details.length,e.details.length&&"string"==typeof t?(angular.forEach(e.details,function(e){e.asset_id=t}),r.store(e.details).success(function(){n.stop(),s=!1}).error(function(){n.error(),s=!1})):s=!1):(s=!1,n.stop())},function(){n.error(),s=!1}))}}]),adminModule.controller("editAssetDialogController",["$scope","$stateParams","$mdDialog","Asset","AssetDetail","Preloader",function(e,t,a,o,r,n){e.asset=n.get(),e.details=e.asset.details,e.label="Edit";var s=!1;e.addDetail=function(){e.details.push({label:null,value:null})},e.removeDetail=function(t){e.details.splice(t,1)},e.cancel=function(){a.cancel()},e.checkDuplicate=function(){e.duplicate=!1,o.checkDuplicate(e.asset,e.asset.id).success(function(t){e.duplicate=t})},e.submit=function(){e.assetForm.$invalid?angular.forEach(e.assetForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):s||e.duplicate||(s=!0,o.update(e.asset.id,e.asset).then(function(e){return e.data}).then(function(t){e.details.length||"string"!=typeof t?(e.details.length,e.details.length&&"string"==typeof t?(angular.forEach(e.details,function(e){e.asset_id=t}),r.update(e.asset.id,e.details).success(function(){n.stop(),s=!1}).error(function(){n.error(),s=!1})):s=!1):(s=!1,n.stop())},function(){n.error(),s=!1}))}}]),adminModule.controller("pullOutDetailsDialogController",["$scope","$mdDialog","AssetTag","Preloader",function(e,t,a,o){var r=o.get();e.cancel=function(){t.cancel()},a.statuses(r).success(function(t){angular.forEach(t.status,function(e){e.created_at=new Date(e.created_at)}),e.assetTag=t,e.label=t.property_code,console.log(e.assetTag)}).error(function(){o.error()})}]),adminModule.controller("assetTagPurchaseOrderContentContainerController",["$scope","$filter","$state","$stateParams","$mdDialog","PurchaseOrder","Preloader","AssetTag",function(e,t,a,o,r,n,s,i){var l=o.purchaseOrderID;e.toolbar={},e.toolbar.items=[],e.toolbar.getItems=function(a){var o=a?t("filter")(e.toolbar.items,a):e.toolbar.items;return o},e.toolbar.getItems=function(a){var o=a?t("filter")(e.toolbar.items,a):e.toolbar.items=[];return o},e.toolbar.childState="Asset Tags",e.toolbar.searchAll=!1,e.toolbar.showBack=!0,e.toolbar.back=function(){a.go("main.purchase-orders")},e.toolbar.refresh=function(){s.loading(),e.init(!0)},e.showSearchBar=function(){e.searchBar=!0},e.hideSearchBar=function(){e.searchBar=!1},e.fab={},e.fab.icon="mdi-plus",e.fab.label="Asset Tag",e.fab.show="True",e.fab.action=function(){s.set(e.purchaseOrder),r.show({controller:"addPurchaseOrderAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/add-purchase-order-asset-tag-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.editAssetTag=function(t){s.set(t),r.show({controller:"editAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/edit-asset-tag-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.deleteAssetTag=function(t){var a=r.confirm().title("Delete").content("Are you sure you want to delete this asset tag?").ariaLabel("Delete Asset Tag").ok("Delete").cancel("Cancel");r.show(a).then(function(){i["delete"](t).success(function(){e.toolbar.refresh()}).error(function(){s.error()})},function(){})};var c=function(t){var a={};a.display=t.property_code,e.toolbar.items.push(a)};e.init=function(t){e.purchaseOrder=null,n.show(l).success(function(a){e.toolbar.parentState=a.tracking_code?"P.O. "+a.tracking_code:"#"+a.id,angular.forEach(a.asset_purchase_order,function(e){e.chart={},e.chart.data=[],e.chart.labels=["Tagged","Untagged"],e.chart.data[0]=e.asset.asset_tags.length,e.chart.data[1]=e.quantity-e.asset.asset_tags.length}),a.date_arrival=new Date(a.date_arrival),a.date_purchased=new Date(a.date_purchased),angular.forEach(a.asset_purchase_order,function(e){angular.forEach(e.asset.asset_tags,function(e){e.current_status=e.status.length?"Pulled Out":e.work_station_id?"Deployed":"Stock",e.warranty_end=e.warranty_end?new Date(e.warranty_end):null,e.date_received=e.date_received?new Date(e.date_received):null,c(e)})}),e.purchaseOrder=a,t&&(s.stop(),s.stop())}).error(function(){s.error()})},e.init()}]),adminModule.controller("createAssetTypeDialogController",["$scope","$mdDialog","AssetType","Preloader",function(e,t,a,o){e.assetType={},e.label="New Asset";var r=!1;e.cancel=function(){t.cancel()},e.checkAssetType=function(){e.duplicate=!1,a.checkAssetType(e.assetType).success(function(t){e.duplicate=t}).error(function(){o.error()})},e.submit=function(){e.assetTypeForm.$invalid?angular.forEach(e.assetTypeForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):r||e.duplicate||(r=!0,a.store(e.assetType).success(function(e){e||(o.stop(),r=!1)}).error(function(e){o.error(),r=!1}))}}]),adminModule.controller("createDepartmentDialogController",["$scope","$mdDialog","Department","Preloader",function(e,t,a,o){e.department={},e.label="New Department";var r=!1;e.cancel=function(){t.cancel()},e.checkDepartment=function(){e.duplicate=!1,a.checkDepartment(e.department).success(function(t){e.duplicate=t}).error(function(){o.error()})},e.submit=function(){e.departmentForm.$invalid?angular.forEach(e.departmentForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):r||e.duplicate||(r=!0,a.store(e.department).success(function(e){e||(o.stop(),r=!1)}).error(function(e){o.error(),r=!1}))}}]),adminModule.controller("createUserDialogController",["$scope","$mdDialog","User","Preloader",function(e,t,a,o){e.user={},e.user.role="admin";var r=!1;e.cancel=function(){t.cancel()},e.checkEmail=function(){e.duplicate=!1,a.checkEmail(e.user).success(function(t){e.duplicate=t}).error(function(){o.error()})},e.submit=function(){if(e.showErrors=!0,e.userForm.$invalid)angular.forEach(e.userForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})});else{if(e.user.password!=e.user.password_confirmation||e.duplicate)return;r||e.duplicate||(r=!0,a.store(e.user).success(function(e){e||(o.stop(),r=!1)}).error(function(){o.error(),r=!1}))}}}]),adminModule.controller("createVendorDialogController",["$scope","$mdDialog","Vendor","Preloader",function(e,t,a,o){e.vendor={},e.label="New Vendor";var r=!1;e.cancel=function(){t.cancel()},e.submit=function(){e.vendorForm.$invalid?angular.forEach(e.vendorForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):(o.loading(),r||(r=!0,a.store(e.vendor).success(function(){o.stop(),r=!1}).error(function(e){o.error(),r=!1})))}}]),adminModule.controller("editAssetTypeDialogController",["$scope","$mdDialog","AssetType","Preloader",function(e,t,a,o){var r=o.get(),n=!1;e.label="Edit Asset",a.show(r).success(function(t){e.assetType=t}).error(function(){o.error()}),e.cancel=function(){t.cancel()},e.checkAssetType=function(){e.duplicate=!1,a.checkAssetType(e.assetType).success(function(t){e.duplicate=t}).error(function(){o.error()})},e.submit=function(){e.assetTypeForm.$invalid?angular.forEach(e.assetTypeForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):n||e.duplicate||(n=!0,a.update(r,e.assetType).success(function(e){e||(o.stop(),n=!1)}).error(function(){o.error(),n=!1}))}}]),adminModule.controller("editDepartmentDialogController",["$scope","$mdDialog","Department","Preloader",function(e,t,a,o){var r=o.get(),n=!1;e.label="Edit Department",a.show(r).success(function(t){e.department=t}).error(function(){o.error()}),e.cancel=function(){t.cancel()},e.checkDepartment=function(){e.duplicate=!1,a.checkDepartment(e.department).success(function(t){e.duplicate=t}).error(function(){o.error()})},e.submit=function(){e.departmentForm.$invalid?angular.forEach(e.departmentForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):n||e.duplicate||(n=!0,a.update(r,e.department).success(function(e){e||(o.stop(),n=!1)}).error(function(){o.error(),n=!1}))}}]),adminModule.controller("editVendorDialogController",["$scope","$mdDialog","Vendor","Preloader",function(e,t,a,o){var r=o.get(),n=!1;a.show(r).success(function(t){e.vendor=t,e.label=t.company}).error(function(){o.error()}),e.cancel=function(){t.cancel()},e.submit=function(){e.vendorForm.$invalid?angular.forEach(e.vendorForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):(o.loading(),n||(n=!0,a.update(r,e.vendor).success(function(){o.stop(),n=!1}).error(function(e){o.error(),n=!1})))}}]),adminModule.controller("activityDialogController",["$scope","$mdDialog","Activity","Preloader",function(e,t,a,o){var r=o.get();e.cancel=function(){t.cancel()},a.show(r).success(function(t){e.activity=t}).error(function(){o.error()})}]),adminModule.controller("changePasswordDialogController",["$scope","$mdDialog","User","Preloader",function(e,t,a,o){e.password={},e.cancel=function(){t.cancel()},e.checkPassword=function(){a.checkPassword(e.password).success(function(t){e.match=t,e.show=!0,console.log(e.match)})},e.submit=function(){if(e.showErrors=!0,e.changePasswordForm.$invalid)angular.forEach(e.changePasswordForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})});else{if(e.password.old==e.password["new"]||e.password["new"]!=e.password.confirm)return;o.saving(),a.changePassword(e.password).success(function(){o.stop()}).error(function(){o.error()})}}}]),adminModule.controller("chartWeeklyDialogController",["$scope","$mdDialog","InventoryReport","Preloader",function(e,t,a,o){var r=o.get();e.cancel=function(){t.cancel()},a.chartWeekly(r).success(function(t){e.chart=t}).error(function(){o.error()})}]),adminModule.controller("assetTagDetailsDialogController",["$scope","$mdDialog","Asset","Preloader",function(e,t,a,o){var r=o.get();e.cancel=function(){t.cancel()},a.show(r).success(function(t){e.asset=t,e.label=t.type.type,e.asset.first_letter=t.brand[0].toUpperCase()}).error(function(){o.error()})}]),adminModule.controller("batchSwapAssetTagDialogController",["$scope","$mdDialog","AssetTag","AssetDetail","Preloader","WorkStation",function(e,t,a,o,r,n){var s=r.get(),i=!1;e.transfer={},e.floors=[6,10],e.divisions=["A","B"],e.types=["Admin","Production"],e.getForSwap=function(t){n.show(t).success(function(t){angular.forEach(t.asset_tags,function(e){e.first_letter=e.asset.brand.charAt(0).toUpperCase()}),e.workStationSwap=t})},e.cancel=function(){t.cancel()},n.others(s).success(function(t){e.workStations=t}),n.show(s).success(function(t){angular.forEach(t.asset_tags,function(e){e.first_letter=e.asset.brand.charAt(0).toUpperCase()}),e.workStation=t}),e.submit=function(){e.assetTagForm.$invalid?angular.forEach(e.assetTagForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):i||(i=!0,n.batchSwap(s,e.transfer).success(function(){r.stop(),i=!1}).error(function(){r.error(),i=!1}))}}]),adminModule.controller("batchTransferAssetTagDialogController",["$scope","$mdDialog","AssetTag","AssetDetail","Preloader","WorkStation",function(e,t,a,o,r,n){var s=r.get(),i=!1;e.transfer={},e.floors=[6,10],e.divisions=["A","B"],e.types=["Admin","Production"],e.cancel=function(){t.cancel()},n.others(s).success(function(t){e.workStations=t}),n.show(s).success(function(t){angular.forEach(t.asset_tags,function(e){e.first_letter=e.asset.brand.charAt(0).toUpperCase()}),e.workStation=t}),e.submit=function(){e.assetTagForm.$invalid?angular.forEach(e.assetTagForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):(r.saving(),i||(i=!0,n.batchTransfer(s,e.transfer).success(function(){r.stop(),i=!1}).error(function(){r.error(),i=!1})))}}]),adminModule.controller("createAssetTagDialogController",["$scope","$stateParams","$mdDialog","Preloader","AssetTag","AssetType","Asset","AssetDetail",function(e,t,a,o,r,n,s,i){e.assetTag={},e.assetTag.warranty_end=new Date,e.assetTag.work_station_id=t.workStationID,e.minDate=new Date,e.hasWarranty=!1;var l=!1;n.index().success(function(t){e.assetTypes=t}).error(function(){o.error()}),e.getUniqueBrands=function(t){e.brand=null,e.assetTag.asset_id=null,e.details=[],e.assetTag.sequence=null,e.duplicate=!1,s.brands(e.assetTypes[t].id).success(function(t){e.brands=t}).error(function(){o.error()})},e.getAssetDetails=function(t){e.checkSequence(),i.show(t).success(function(t){e.details=t}).error(function(){o.error()}),r.lastPropertyCode(e.assetTag).success(function(t){e.assetTag.lastPropertyCode=t.property_code}).error(function(){o.error()})},e.checkSequence=function(){e.duplicate=!1,r.checkSequence(e.assetTag).success(function(t){e.duplicate=t}).error(function(){o.error()})},e.cancel=function(){a.cancel()},e.submit=function(){e.assetTagForm.$invalid?angular.forEach(e.assetTagForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):l||e.duplicate||(l=!0,e.assetTag.warranty_end=e.hasWarranty?e.assetTag.warranty_end.toDateString():null,r.store(e.assetTag).success(function(e){e?l=!1:o.stop()}).error(function(){o.error()}))}}]),adminModule.controller("editAssetTagDialogController",["$scope","$stateParams","$mdDialog","Preloader","AssetTag","Asset","AssetDetail","PurchaseOrder",function(e,t,a,o,r,n,s,i){var l=o.get(),c=!1;r.show(l).success(function(t){e.hasWarranty=!!t.warranty_end,t.warranty_end=t.warranty_end?new Date(t.warranty_end):new Date,t.date_received=t.date_received?new Date(t.date_received):new Date,e.minDateWarranty=t.purchase_order?new Date(t.purchase_order.date_purchased):null,e.minDatePurchaseOrder=t.purchase_order?new Date(t.purchase_order.date_purchased):null,e.hasPurchaseOrder=!!t.purchase_order_id,e.assetTag=t,r.lastPropertyCode(e.assetTag).success(function(t){e.assetTag.lastPropertyCode=t.property_code}).error(function(){o.error()}),n.purchaseOrders(t.asset_id).success(function(t){e.purchaseOrders=t}).error(function(){o.error()})}),e.checkSequence=function(){e.duplicate=!1,r.checkSequence(e.assetTag).success(function(t){e.duplicate=t}).error(function(){o.error()})},e.cancel=function(){a.cancel()},e.submit=function(){e.assetTagForm.$invalid?angular.forEach(e.assetTagForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):c||e.duplicate||(e.assetTag.warranty_end=e.hasWarranty?e.assetTag.warranty_end.toDateString():null,e.assetTag.purchase_order_id=e.hasPurchaseOrder?e.assetTag.purchase_order_id:null,e.assetTag.date_received=e.assetTag.date_received?e.assetTag.date_received.toDateString():null,r.update(l,e.assetTag).success(function(e){e||o.stop()}).error(function(){o.error()}))}}]),adminModule.controller("editdepartmentWorkStationDialogController",["$scope","$mdDialog","Preloader","WorkStation","DepartmentWorkStation","Department",function(e,t,a,o,r,n){var s=a.get(),i=!1;e.init=function(){n.index().then(function(t){e.departments=t.data}).then(function(){o.show(s).success(function(t){e.workStation=t,e.workStation.departments=[],angular.forEach(e.departments,function(t,a){e.workStation.departments.push({department_id:null}),r.relation(t.id,s).success(function(t){t&&e.workStation.departments.splice(a,1,t)})})}).error(function(){a.error()})},function(){a.error()})}(),e.checkIP=function(){e.duplicate=!1,o.checkIP(s,e.workStation).success(function(t){e.duplicate=t}).error(function(){a.error()})},e.cancel=function(){t.cancel()},e.submit=function(){e.show=!0,e.workStationForm.$invalid?angular.forEach(e.workStationForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):i||e.duplicate||!e.workStation.departments.length||(i=!0,o.update(s,e.workStation).then(function(e){return e.data}).then(function(t){t?i=!1:(e.tags=0,angular.forEach(e.workStation.departments,function(t){t.department_id&&(t.work_station_id=s,e.tags+=1)}),e.tags>=1?r.update(s,e.workStation.departments).success(function(){i=!1,a.stop()}).error(function(){a.error(),i=!1}):i=!1)},function(){a.error(),i=!1}))}}]),adminModule.controller("editWorkStationDialogController",["$scope","$stateParams","$mdDialog","Preloader","WorkStation",function(e,t,a,o,r){var n=!1;e.workStation={},e.floors=[{pattern:6,value:"06"},{pattern:10,value:"10"}],e.divisions=["A","B"],e.types=[{pattern:"Admin",value:"A"},{pattern:"Production",value:"P"}],e.patterns=[{pattern:"A06-A-A***",value:"A06-A-A",meaning:"Aeon 6th Floor - Division A - Admin Station Number"},{pattern:"A06-A-P***",value:"A06-A-P",meaning:"Aeon 6th Floor - Division A - Production Station Number"},{pattern:"A10-A-P***",value:"A10-A-P",meaning:"Aeon 10th Floor - Division A - Production Station Number"},{pattern:"A06-B-A***",value:"A06-B-A",meaning:"Aeon 6th Floor - Division B - Admin Station Number"},{pattern:"A06-B-P***",value:"A06-B-P",meaning:"Aeon 6th Floor - Division B - Production Station Number"}],e.cancel=function(){a.cancel()},e.submit=function(){e.addWorkStationForm.$invalid?angular.forEach(e.addWorkStationForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):n||(n=!0,o.saving(),r.store(e.workStation).success(function(){n=!1,o.stop()}).error(function(){n=!1,o.error()}))}}]),adminModule.controller("pullOutAssetTagDialogController",["$scope","$mdDialog","AssetTag","AssetDetail","AssetStatus","Preloader","WorkStation",function(e,t,a,o,r,n,s){var i=n.get(),l=!1;e.assetTagStatus={},e.cancel=function(){t.cancel()},a.show(i).then(function(t){return e.assetTag=t.data,e.assetTag.first_letter=t.data.asset.brand[0].toUpperCase(),e.assetTagStatus.id=t.data.id,t.data}).then(function(t){o.show(t.asset.id).success(function(t){e.details=t}).error(function(){n.error()})},function(){n.error()}),e.submit=function(){e.assetTagForm.$invalid?angular.forEach(e.assetTagForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):(n.saving(),l||(l=!0,r.store(e.assetTagStatus).success(function(){n.stop(),l=!1}).error(function(){n.error(),l=!1})))}}]),adminModule.controller("swapAssetTagDialogController",["$scope","$mdDialog","AssetTag","AssetDetail","Preloader","WorkStation",function(e,t,a,o,r,n){var s=r.get(),i=!1;e.swap={},e.floors=[6,10],e.divisions=["A","B"],e.types=["Admin","Production"],e.checkSwap=function(){a.checkSwap(e.swap).success(function(t){
t.length?(angular.forEach(t,function(e){e.first_letter=e.asset.brand[0].toUpperCase()}),e.swapItems=t.length>1?t:[],e.swap.asset_tag=1==t.length?t[0]:null,e.match=!0):(e.swap.asset_tag=null,e.match=!1)}).error(function(){r.error()})},e.cancel=function(){t.cancel()},a.show(s).then(function(t){return e.assetTag=t.data,e.assetTag.first_letter=t.data.asset.brand[0].toUpperCase(),e.label=t.data.property_code,e.swap.asset_type_id=t.data.asset_type_id,t.data}).then(function(t){o.show(t.asset.id).success(function(t){e.details=t}).error(function(){r.error()}),n.others(t.work_station_id).success(function(t){e.workStations=t}).error(function(){r.error()})},function(){r.error()}),e.submit=function(){e.assetTagForm.$invalid?angular.forEach(e.assetTagForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):!i&&e.match&&(r.saving(),i=!0,a.swap(s,e.swap.asset_tag).success(function(){r.stop(),i=!1}).error(function(){r.error(),i=!1}))}}]),adminModule.controller("tagUsersWorkStationDialogController",["$scope","$stateParams","$mdDialog","Preloader","Employee","EmployeeTag","AssetTagService",function(e,t,a,o,r,n,s){e.workStation=s.getStation(),e.employee_tag={},e.employee_tag.work_station_id=t.workStationID,r.department(t.departmentID).success(function(t){e.employees=t}),e.cancel=function(){a.cancel()},e.submit=function(){o.preload(),n.store(e.employee_tag).success(function(){}).error(function(){o.error()})}}]),adminModule.controller("transferAssetTagDialogController",["$scope","$mdDialog","AssetTag","AssetDetail","Preloader","WorkStation",function(e,t,a,o,r,n){var s=r.get(),i=!1;e.transfer={},e.floors=[6,10],e.divisions=["A","B"],e.types=["Admin","Production"],e.cancel=function(){t.cancel()},a.show(s).then(function(t){return e.assetTag=t.data,e.assetTag.first_letter=t.data.asset.brand[0].toUpperCase(),e.label=t.data.property_code,t.data}).then(function(t){o.show(t.asset.id).success(function(t){e.details=t}).error(function(){r.error()}),n.others(t.work_station_id).success(function(t){e.workStations=t}).error(function(){r.error()})},function(){r.error()}),e.submit=function(){e.assetTagForm.$invalid?angular.forEach(e.assetTagForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):(r.saving(),i||(i=!0,a.transfer(s,e.transfer).success(function(){r.stop(),i=!1}).error(function(){r.error(),i=!1})))}}]),adminModule.controller("transferUsersDialogController",["$scope","$stateParams","$mdDialog","Preloader","EmployeeTag","WorkStation","UserService",function(e,t,a,o,r,n,s){e.employee_tag={},e.employee_tag.employee_tag_id=s.get(),n.department(t.departmentID,t.workStationID).success(function(t){e.workStations=t}),r.show(e.employee_tag.employee_tag_id).success(function(t){e.employee=t,e.employee_tag.employee_id=t.id}),e.cancel=function(){a.cancel()},e.submit=function(){o.preload(),r.update(e.employee_tag.employee_tag_id,e.employee_tag).success(function(){}).error(function(){o.error()})}}]),adminModule.controller("usersWorkStationDialogController",["$scope","$stateParams","$mdDialog","Preloader","Employee","AssetTagService",function(e,t,a,o,r,n){e.workStation=n.getStation(),r.workstation(t.workStationID).success(function(t){e.show=!0,e.employees=t}),e.cancel=function(){a.cancel()},e.tag=function(){a.hide()},e.transfer=function(e){a.hide(e)}}]),adminModule.controller("workStationContentContainerController",["$scope","$filter","$state","$stateParams","$mdDialog","Preloader","WorkStation","AssetTag",function(e,t,a,o,r,n,s,i){var l=o.workStationID;e.toolbar={},e.toolbar.parentState="Work Stations",e.toolbar.items=[],e.toolbar.showBack=!0,e.toolbar.back=function(){a.go("main.work-stations")},e.toolbar.getItems=function(a){var o=a?t("filter")(e.toolbar.items,a):e.toolbar.items;return o},e.toolbar.refresh=function(){n.loading(),e.init(!0)},e.showSearchBar=function(){e.searchBar=!0},e.hideSearchBar=function(){e.searchBar=!1,e.toolbar.searchText="",e.workStation.searched&&(e.toolbar.refresh(),e.workStation.searched=!1)},e.rightSidenav={},e.rightSidenav.show=!0,e.editDepartmentWorkStation=function(){n.set(l),r.show({controller:"editdepartmentWorkStationDialogController",templateUrl:"/app/components/admin/templates/dialogs/edit-update-work-station-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.createAssetTag=function(){r.show({controller:"createAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/create-asset-tag-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.fab={},e.fab.icon="mdi-plus",e.fab.label="Add",e.fab.tooltip="Add Asset",e.fab.action=function(){e.createAssetTag()},e.editAssetTag=function(t){n.set(t),r.show({controller:"editAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/edit-asset-tag-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.transferAssetTag=function(t){n.set(t),r.show({controller:"transferAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/transfer-asset-tag-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.swapAssetTag=function(t){n.set(t),r.show({controller:"swapAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/swap-asset-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.pullOutAssetTag=function(t){n.set(t),r.show({controller:"pullOutAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/pull-out-asset-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})},e.deleteAssetTag=function(t){var a=r.confirm().title("Delete").content("Are you sure you want to delete this asset tag?").ariaLabel("Delete Asset Tag").ok("Delete").cancel("Cancel");r.show(a).then(function(){i["delete"](t).success(function(){e.toolbar.refresh()}).error(function(){n.error()})},function(){})},e.showDetails=function(e){n.set(e),r.show({controller:"assetTagDetailsDialogController",templateUrl:"/app/components/admin/templates/dialogs/asset-tag-details-dialog.template.html",parent:angular.element($("body")),clickOutsideToClose:!0})},e.purchaseOrder=function(e){a.go("main.asset-tag-purchase-order",{purchaseOrderID:e})},e.init=function(t){s.show(l).success(function(o){angular.forEach(o.asset_tags,function(t){var a={};a.display=t.property_code,a.brand=t.asset.brand,a.model=t.asset.model,a.type=t.asset.type,e.toolbar.items.push(a)}),o.departments.length||(n.set(l),r.show({controller:"editdepartmentWorkStationDialogController",templateUrl:"/app/components/admin/templates/dialogs/edit-update-work-station-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()},function(){a.go("main.work-stations")})),angular.forEach(o.asset_tags,function(e){e.warranty_end=e.warranty_end?new Date(e.warranty_end):null,e.first_letter=e.asset.brand.charAt(0).toUpperCase()}),e.workStation=o,e.workStation.asset_tags.length&&(e.toolbar.options=[{label:"Batch Transfer",icon:"mdi-transfer",action:function(){n.set(l),r.show({controller:"batchTransferAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/batch-transfer-asset-tag-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})}},{label:"Batch Swap",icon:"mdi-swap-horizontal",action:function(){n.set(l),r.show({controller:"batchSwapAssetTagDialogController",templateUrl:"/app/components/admin/templates/dialogs/batch-swap-asset-tag-dialog.template.html",parent:angular.element($("body"))}).then(function(){e.toolbar.refresh()})}}]),o.asset_tags.length&&(e.fab.show=!0),e.toolbar.childState=o.name,t&&(n.stop(),n.stop()),e.show=!0}).error(function(){n.error()})},e.init()}]),adminModule.controller("addPurchaseOrderAssetTagDialogController",["$scope","$stateParams","$mdDialog","Preloader","AssetTag","Asset","AssetDetail","WorkStation",function(e,t,a,o,r,n,s,i){e.purchaseOrder=o.get(),e.hasWarranty=!0,e.deploy=!0,e.assetTag={},e.assetTag.purchase_order_id=e.purchaseOrder.id,e.assetTag.warranty_end=new Date,e.assetTag.date_received=new Date,e.assetTag.max_date=new Date,e.maxDatePurchaseOrder=new Date,e.minDatePurchaseOrder=new Date(e.purchaseOrder.date_purchased),e.floors=[6,10],e.divisions=["A","B"],e.types=["Admin","Production"];var l=!1;i.index().success(function(t){e.workStations=t}).error(function(){o.error()}),e.checkSequence=function(){e.duplicate=!1,r.checkSequence(e.assetTag).success(function(t){e.duplicate=t}).error(function(){o.error()})},e.cancel=function(){a.cancel()},e.checkLastPropertyCode=function(){r.lastPropertyCode(e.assetTag).success(function(t){e.assetTag.lastPropertyCode=t.property_code}).error(function(){o.error()})},e.submit=function(){e.assetTagForm.$invalid?angular.forEach(e.assetTagForm.$error,function(e){angular.forEach(e,function(e){e.$setTouched()})}):l||e.duplicate||(e.assetTag.warranty_end=e.hasWarranty?e.assetTag.warranty_end.toDateString():null,e.assetTag.date_received=e.assetTag.date_received?e.assetTag.date_received.toDateString():null,e.assetTag.work_station_id=e.deploy?e.assetTag.work_station_id:null,r.store(e.assetTag).success(function(e){e||o.stop()}).error(function(){o.error()}))}}]);